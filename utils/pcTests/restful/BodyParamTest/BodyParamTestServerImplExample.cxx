/*************************************************************************
 * Copyright (c) 2012 eProsima. All rights reserved.
 *
 * This generated file is licensed to you under the terms described in the
 * RPCDDS_LICENSE file included in this RPCDDS distribution.
 *
 *************************************************************************
 * 
 * @file BodyParamTestServerImplExample.cxx
 * This source file contains an example of the declaration of a servant.
 *
 * This file was generated by the tool rpcddsgen.
 */

#include "BodyParamTestServerImplExample.h"

#include <iostream>
#include <string>

using namespace std;


using namespace BodyParamTest;


PostBodyParamResponse resourceResourceServerImplExample::postBodyParam(/*in*/ const PostBodyParamRequest& PostBodyParamRequest)
{
    PostBodyParamResponse postBodyParam_ret;
    PostBodyParamResponse_initialize(&postBodyParam_ret);

	string response = "";

	postBodyParam_ret._d = PostBodyParamRequest._d;
	if(PostBodyParamRequest._d == 1) {
		response = "<Response>";
		response += PostBodyParamRequest._u.xmlRepresentation;
		response += "</Response>";

		postBodyParam_ret._u.xmlPostBodyParamResponse.status = 200;
		postBodyParam_ret._u.xmlPostBodyParamResponse.xmlRepresentation = strdup(response.c_str());
		cout << "XML response: " ;
	} else {
		response = "{RESPONSE:\"";
		response += PostBodyParamRequest._u.jsonRepresentation;
		response += "\"}";
		
		postBodyParam_ret._u.jsonPostBodyParamResponse.status = 200;
		postBodyParam_ret._u.jsonPostBodyParamResponse.jsonRepresentation = strdup(response.c_str());
		cout << "JSON response: " ;
	}

	cout << response << endl;
   
    return postBodyParam_ret;
} 

